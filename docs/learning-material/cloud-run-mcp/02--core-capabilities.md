# 核心功能與操作

## 關鍵字

- **List Services**：列出專案中的所有 Cloud Run 服務。
- **Get Service**：獲取特定服務的詳細設定資訊。
- **Service Logs**：檢視服務的執行紀錄與錯誤訊息。

## 學習目標

完成本章節後，您將能夠：

1. 使用 MCP 查詢 Cloud Run 專案狀態。
2. 檢視特定服務的詳細資訊。
3. 透過 AI 讀取並分析服務 Log。

## 步驟說明

### 步驟 1：查詢與盤點資源

#### 我們在做什麼？

使用 `cloudrun_list_projects` 與 `cloudrun_list_services` 工具來了解目前雲端環境的狀態。

#### 為什麼需要這樣做？

在管理多個專案或微服務時，快速列出所有執行中的服務能幫助開發者掌握全局。

#### 應用範例

您可以對 AI 說：

> "列出我目前的 GCP 專案與所有 Cloud Run 服務"

AI 會呼叫對應工具並回傳列表，包含服務名稱、區域與網址。

### 步驟 2：檢視服務詳情

#### 我們在做什麼？

使用 `cloudrun_get_service` 工具來查看服務的具體配置，如映像檔版本、環境變數、記憶體限制等。

#### 為什麼需要這樣做？

當服務行為異常或需要確認部署版本時，直接查看服務配置是必要的除錯步驟。

#### 應用範例

對 AI 說：

> "檢查 `api-service` 的詳細設定"

### 步驟 3：讀取與分析 Log

#### 我們在做什麼？

使用 `cloudrun_get_service_log` 工具來獲取服務的近期日誌。

#### 為什麼需要這樣做？

這是此 MCP 最強大的功能之一。您不僅能看到 Log，還能請 AI **分析** Log 中的錯誤模式，找出 Root Cause。不需要手動篩選大量文字。

#### 應用範例

對 AI 說：

> "取得 `backend-api` 最新的錯誤 Log 並分析原因"

## 常見問題 Q&A

### Q1：Log 可以看多久以前的？

**答：** 工具通常預設抓取最近期的 Log。若需要歷史查詢，建議使用 Cloud Logging 的進階篩選功能。

### Q2：我可以修改服務設定嗎？

**答：** 目前 Cloud Run MCP 主要專注於 **讀取 (Read)** 與 **部署 (Deploy)**。對於修改現有服務的環境變數或配置，通常透過重新部署或使用 `gcloud` 指令較為保險。

## 重點整理

| 工具名稱          | 用途     | 典型 Prompt                     |
| ----------------- | -------- | ------------------------------- |
| `list_services`   | 列出服務 | "我有跑哪些服務？"              |
| `get_service`     | 查看詳情 | "這個服務用哪個 Docker Image？" |
| `get_service_log` | 讀取 Log | "服務為什麼剛剛 500 錯誤？"     |
